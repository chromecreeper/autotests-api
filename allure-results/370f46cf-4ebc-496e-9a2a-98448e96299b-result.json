{"name": "Get courses", "status": "broken", "statusDetails": {"message": "NameError: name 'Draft202012Validator' is not defined", "trace": "self = <tests.courses.test_courses.TestCourses object at 0x107538c10>, courses_client = <clients.courses.courses_client.CoursesClient object at 0x1074bd5d0>\nfunction_user = UserFixture(request=CreateUserRequestSchema(email='dawnbennett@example.net', password='!%F@GQmk24', last_name='Horton'...-a93e-e3e7e0660f45', email='dawnbennett@example.net', last_name='Horton', first_name='Patrick', middle_name='Andrew')))\nfunction_course = CourseFixture(request=CreateCourseRequestSchema(title='Ago police value.', max_score=92, min_score=15, description='Th...a93e-e3e7e0660f45', email='dawnbennett@example.net', last_name='Horton', first_name='Patrick', middle_name='Andrew'))))\n\n    @allure.tag(AllureTag.GET_ENTITIES)\n    @allure.story(AllureStory.GET_ENTITIES)  # Добавили story\n    @allure.title(\"Get courses\")\n    @allure.sub_suite(AllureStory.GET_ENTITIES)\n    def test_get_courses(\n            self,\n            courses_client: CoursesClient,\n            function_user: UserFixture,\n            function_course: CourseFixture\n    ):\n        query = GetCoursesQuerySchema(user_id=function_user.response.user.id)\n        response = courses_client.get_courses_api(query)\n        response_data = GetCoursesResponseSchema.model_validate_json(response.text)\n    \n        assert_status_code(response.status_code, HTTPStatus.OK)\n        assert_get_courses_response(response_data, [function_course.response])\n    \n>       validate_json_schema(response.json(), response_data.model_json_schema())\n\ntests/courses/test_courses.py:46: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ninstance = {'courses': [{'createdByUser': {'email': 'dawnbennett@example.net', 'firstName': 'Patrick', 'id': '82888e90-248c-40cc-... station paper if still computer me.', 'estimatedTime': '7 weeks', 'id': '68fa6e7a-d0ab-4253-8ff7-5dc4f71e736d', ...}]}\nschema = {'$defs': {'CourseSchema': {'description': 'Описание модели курса.', 'properties': {'createdByUser': {'$ref': '#/$defs...rses': {'items': {'$ref': '#/$defs/CourseSchema'}, 'title': 'Courses', 'type': 'array'}}, 'required': ['courses'], ...}\n\n    @allure.step(\"Validating JSON schema\")\n    def validate_json_schema(instance: Any, schema: dict) -> None:\n        \"\"\"\n        Проверяет, соответствует ли JSON-объект (instance) заданной JSON-схеме (schema).\n    \n        :param instance: JSON-данные, которые нужно проверить.\n        :param schema: Ожидаемая JSON-schema.\n        :raises jsonschema.exceptions.ValidationError: Если instance не соответствует schema.\n        \"\"\"\n        # Логируем факт начала валидации\n        logger.info(\"Validating JSON schema\")\n    \n        validate(\n            schema=schema,\n            instance=instance,\n>           format_checker=Draft202012Validator.FORMAT_CHECKER,\n                           ^^^^^^^^^^^^^^^^^^^^\n        )\nE       NameError: name 'Draft202012Validator' is not defined\n\ntools/assertions/schema.py:25: NameError"}, "steps": [{"name": "Get courses", "status": "passed", "steps": [{"name": "Make GET request to '/api/v1/courses'", "status": "passed", "attachments": [{"name": "cURL command", "source": "f0aec8a1-3514-464e-83b3-872df4809ceb-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "url", "value": "'/api/v1/courses'"}, {"name": "params", "value": "{'userId': '82888e90-248c-40cc-a93e-e3e7e0660f45'}"}], "start": 1752506420136, "stop": 1752506420147}], "parameters": [{"name": "query", "value": "GetCoursesQuerySchema(user_id='82888e90-248c-40cc-a93e-e3e7e0660f45')"}], "start": 1752506420136, "stop": 1752506420147}, {"name": "Check that response status code equals to <HTTPStatus.OK: 200>", "status": "passed", "parameters": [{"name": "actual", "value": "200"}, {"name": "expected", "value": "<HTTPStatus.OK: 200>"}], "start": 1752506420147, "stop": 1752506420147}, {"name": "Check get courses response", "status": "passed", "steps": [{"name": "Check that length of courses equals to 1", "status": "passed", "start": 1752506420148, "stop": 1752506420148}, {"name": "Check course", "status": "passed", "steps": [{"name": "Check that 'id' equals to '68fa6e7a-d0ab-4253-8ff7-5dc4f71e736d'", "status": "passed", "parameters": [{"name": "actual", "value": "'68fa6e7a-d0ab-4253-8ff7-5dc4f71e736d'"}, {"name": "expected", "value": "'68fa6e7a-d0ab-4253-8ff7-5dc4f71e736d'"}, {"name": "name", "value": "'id'"}], "start": 1752506420148, "stop": 1752506420148}, {"name": "Check that 'title' equals to 'Ago police value.'", "status": "passed", "parameters": [{"name": "actual", "value": "'Ago police value.'"}, {"name": "expected", "value": "'Ago police value.'"}, {"name": "name", "value": "'title'"}], "start": 1752506420148, "stop": 1752506420148}, {"name": "Check that 'max_score' equals to 92", "status": "passed", "parameters": [{"name": "actual", "value": "92"}, {"name": "expected", "value": "92"}, {"name": "name", "value": "'max_score'"}], "start": 1752506420148, "stop": 1752506420148}, {"name": "Check that 'min_score' equals to 15", "status": "passed", "parameters": [{"name": "actual", "value": "15"}, {"name": "expected", "value": "15"}, {"name": "name", "value": "'min_score'"}], "start": 1752506420148, "stop": 1752506420148}, {"name": "Check that 'description' equals to 'Thing serve it world her level simply. Style benefit common road former position. That skill issue station PM.\nBed imagine serious coach beyond. Place read station paper if still computer me.'", "status": "passed", "parameters": [{"name": "actual", "value": "'Thing serve it world her level simply. Style benefit common road former position. That skill issue station PM.\nBed imagine serious coach beyond. Place read station paper if still computer me.'"}, {"name": "expected", "value": "'Thing serve it world her level simply. Style benefit common road former position. That skill issue station PM.\nBed imagine serious coach beyond. Place read station paper if still computer me.'"}, {"name": "name", "value": "'description'"}], "start": 1752506420148, "stop": 1752506420148}, {"name": "Check that 'estimated_time' equals to '7 weeks'", "status": "passed", "parameters": [{"name": "actual", "value": "'7 weeks'"}, {"name": "expected", "value": "'7 weeks'"}, {"name": "name", "value": "'estimated_time'"}], "start": 1752506420148, "stop": 1752506420148}, {"name": "Check file", "status": "passed", "steps": [{"name": "Check that 'id' equals to '6bd08ce2-7151-4c1a-8371-28c8cc6f029d'", "status": "passed", "parameters": [{"name": "actual", "value": "'6bd08ce2-7151-4c1a-8371-28c8cc6f029d'"}, {"name": "expected", "value": "'6bd08ce2-7151-4c1a-8371-28c8cc6f029d'"}, {"name": "name", "value": "'id'"}], "start": 1752506420148, "stop": 1752506420148}, {"name": "Check that 'url' equals to HttpUrl('http://localhost:8000/static/tests/0de09ace-9997-4636-8985-93ec736cc6aa.png')", "status": "passed", "parameters": [{"name": "actual", "value": "HttpUrl('http://localhost:8000/static/tests/0de09ace-9997-4636-8985-93ec736cc6aa.png')"}, {"name": "expected", "value": "HttpUrl('http://localhost:8000/static/tests/0de09ace-9997-4636-8985-93ec736cc6aa.png')"}, {"name": "name", "value": "'url'"}], "start": 1752506420148, "stop": 1752506420148}, {"name": "Check that 'filename' equals to '0de09ace-9997-4636-8985-93ec736cc6aa.png'", "status": "passed", "parameters": [{"name": "actual", "value": "'0de09ace-9997-4636-8985-93ec736cc6aa.png'"}, {"name": "expected", "value": "'0de09ace-9997-4636-8985-93ec736cc6aa.png'"}, {"name": "name", "value": "'filename'"}], "start": 1752506420148, "stop": 1752506420148}, {"name": "Check that 'directory' equals to 'tests'", "status": "passed", "parameters": [{"name": "actual", "value": "'tests'"}, {"name": "expected", "value": "'tests'"}, {"name": "name", "value": "'directory'"}], "start": 1752506420148, "stop": 1752506420148}], "parameters": [{"name": "actual", "value": "FileSchema(id='6bd08ce2-7151-4c1a-8371-28c8cc6f029d', url=HttpUrl('http://localhost:8000/static/tests/0de09ace-9997-4636-8985-93ec736cc6aa.png'), filename='0de09ace-9997-4636-8985-93ec736cc6aa.png', directory='tests')"}, {"name": "expected", "value": "FileSchema(id='6bd08ce2-7151-4c1a-8371-28c8cc6f029d', url=HttpUrl('http://localhost:8000/static/tests/0de09ace-9997-4636-8985-93ec736cc6aa.png'), filename='0de09ace-9997-4636-8985-93ec736cc6aa.png', directory='tests')"}], "start": 1752506420148, "stop": 1752506420148}, {"name": "Check user", "status": "passed", "steps": [{"name": "Check that 'id' equals to '82888e90-248c-40cc-a93e-e3e7e0660f45'", "status": "passed", "parameters": [{"name": "actual", "value": "'82888e90-248c-40cc-a93e-e3e7e0660f45'"}, {"name": "expected", "value": "'82888e90-248c-40cc-a93e-e3e7e0660f45'"}, {"name": "name", "value": "'id'"}], "start": 1752506420148, "stop": 1752506420148}, {"name": "Check that 'email' equals to 'dawnbennett@example.net'", "status": "passed", "parameters": [{"name": "actual", "value": "'dawnbennett@example.net'"}, {"name": "expected", "value": "'dawnbennett@example.net'"}, {"name": "name", "value": "'email'"}], "start": 1752506420148, "stop": 1752506420149}, {"name": "Check that 'last_name' equals to 'Horton'", "status": "passed", "parameters": [{"name": "actual", "value": "'Horton'"}, {"name": "expected", "value": "'Horton'"}, {"name": "name", "value": "'last_name'"}], "start": 1752506420149, "stop": 1752506420149}, {"name": "Check that 'first_name' equals to 'Patrick'", "status": "passed", "parameters": [{"name": "actual", "value": "'Patrick'"}, {"name": "expected", "value": "'Patrick'"}, {"name": "name", "value": "'first_name'"}], "start": 1752506420149, "stop": 1752506420149}, {"name": "Check that 'middle_name' equals to 'Andrew'", "status": "passed", "parameters": [{"name": "actual", "value": "'Andrew'"}, {"name": "expected", "value": "'Andrew'"}, {"name": "name", "value": "'middle_name'"}], "start": 1752506420149, "stop": 1752506420149}], "parameters": [{"name": "actual", "value": "UserSchema(id='82888e90-248c-40cc-a93e-e3e7e0660f45', email='dawnbennett@example.net', last_name='Horton', first_name='Patrick', middle_name='Andrew')"}, {"name": "expected", "value": "UserSchema(id='82888e90-248c-40cc-a93e-e3e7e0660f45', email='dawnbennett@example.net', last_name='Horton', first_name='Patrick', middle_name='Andrew')"}], "start": 1752506420148, "stop": 1752506420149}], "parameters": [{"name": "actual", "value": "CourseSchema(id='68fa6e7a-d0ab-4253-8ff7-5dc4f71e736d', title='Ago police value.', max_score=92, min_score=15, description='Thing serve it world her level simply. Style benefit common road former position. That skill issue station PM.\\nBed imagine serious coach beyond. Place read station paper if still computer me.', preview_file=FileSchema(id='6bd08ce2-7151-4c1a-8371-28c8cc6f029d', url=HttpUrl('http://localhost:8000/static/tests/0de09ace-9997-4636-8985-93ec736cc6aa.png'), filename='0de09ace-9997-4636-8985-93ec736cc6aa.png', directory='tests'), estimated_time='7 weeks', created_by_user=UserSchema(id='82888e90-248c-40cc-a93e-e3e7e0660f45', email='dawnbennett@example.net', last_name='Horton', first_name='Patrick', middle_name='Andrew'))"}, {"name": "expected", "value": "CourseSchema(id='68fa6e7a-d0ab-4253-8ff7-5dc4f71e736d', title='Ago police value.', max_score=92, min_score=15, description='Thing serve it world her level simply. Style benefit common road former position. That skill issue station PM.\\nBed imagine serious coach beyond. Place read station paper if still computer me.', preview_file=FileSchema(id='6bd08ce2-7151-4c1a-8371-28c8cc6f029d', url=HttpUrl('http://localhost:8000/static/tests/0de09ace-9997-4636-8985-93ec736cc6aa.png'), filename='0de09ace-9997-4636-8985-93ec736cc6aa.png', directory='tests'), estimated_time='7 weeks', created_by_user=UserSchema(id='82888e90-248c-40cc-a93e-e3e7e0660f45', email='dawnbennett@example.net', last_name='Horton', first_name='Patrick', middle_name='Andrew'))"}], "start": 1752506420148, "stop": 1752506420149}], "parameters": [{"name": "get_courses_response", "value": "GetCoursesResponseSchema(courses=[CourseSchema(id='68fa6e7a-d0ab-4253-8ff7-5dc4f71e736d', title='Ago police value.', max_score=92, min_score=15, description='Thing serve it world her level simply. Style benefit common road former position. That skill issue station PM.\\nBed imagine serious coach beyond. Place read station paper if still computer me.', preview_file=FileSchema(id='6bd08ce2-7151-4c1a-8371-28c8cc6f029d', url=HttpUrl('http://localhost:8000/static/tests/0de09ace-9997-4636-8985-93ec736cc6aa.png'), filename='0de09ace-9997-4636-8985-93ec736cc6aa.png', directory='tests'), estimated_time='7 weeks', created_by_user=UserSchema(id='82888e90-248c-40cc-a93e-e3e7e0660f45', email='dawnbennett@example.net', last_name='Horton', first_name='Patrick', middle_name='Andrew'))])"}, {"name": "create_course_responses", "value": "[CreateCourseResponseSchema(course=CourseSchema(id='68fa6e7a-d0ab-4253-8ff7-5dc4f71e736d', title='Ago police value.', max_score=92, min_score=15, description='Thing serve it world her level simply. Style benefit common road former position. That skill issue station PM.\\nBed imagine serious coach beyond. Place read station paper if still computer me.', preview_file=FileSchema(id='6bd08ce2-7151-4c1a-8371-28c8cc6f029d', url=HttpUrl('http://localhost:8000/static/tests/0de09ace-9997-4636-8985-93ec736cc6aa.png'), filename='0de09ace-9997-4636-8985-93ec736cc6aa.png', directory='tests'), estimated_time='7 weeks', created_by_user=UserSchema(id='82888e90-248c-40cc-a93e-e3e7e0660f45', email='dawnbennett@example.net', last_name='Horton', first_name='Patrick', middle_name='Andrew')))]"}], "start": 1752506420148, "stop": 1752506420149}, {"name": "Validating JSON schema", "status": "broken", "statusDetails": {"message": "NameError: name 'Draft202012Validator' is not defined\n", "trace": "  File \"/Users/basmakovoleg/my-git-projects/autotests-api/.venv/lib/python3.11/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/Users/basmakovoleg/my-git-projects/autotests-api/tools/assertions/schema.py\", line 25, in validate_json_schema\n    format_checker=Draft202012Validator.FORMAT_CHECKER,\n                   ^^^^^^^^^^^^^^^^^^^^\n"}, "parameters": [{"name": "instance", "value": "{'courses': [{'id': '68fa6e7a-d0ab-4253-8ff7-5dc4f71e736d', 'title': 'Ago police value.', 'maxScore': 92, 'minScore': 15, 'description': 'Thing serve it world her level simply. Style benefit common road former position. That skill issue station PM.\\nBed imagine serious coach beyond. Place read station paper if still computer me.', 'previewFile': {'id': '6bd08ce2-7151-4c1a-8371-28c8cc6f029d', 'filename': '0de09ace-9997-4636-8985-93ec736cc6aa.png', 'directory': 'tests', 'url': 'http://localhost:8000/static/tests/0de09ace-9997-4636-8985-93ec736cc6aa.png'}, 'estimatedTime': '7 weeks', 'createdByUser': {'id': '82888e90-248c-40cc-a93e-e3e7e0660f45', 'email': 'dawnbennett@example.net', 'lastName': 'Horton', 'firstName': 'Patrick', 'middleName': 'Andrew'}}]}"}, {"name": "schema", "value": "{'$defs': {'CourseSchema': {'description': 'Описание модели курса.', 'properties': {'id': {'title': 'Id', 'type': 'string'}, 'title': {'default': 'Playwright', 'title': 'Title', 'type': 'string'}, 'maxScore': {'default': 1000, 'title': 'Maxscore', 'type': 'integer'}, 'minScore': {'default': 100, 'title': 'Minscore', 'type': 'integer'}, 'description': {'default': 'Playwright course', 'title': 'Description', 'type': 'string'}, 'previewFile': {'$ref': '#/$defs/FileSchema'}, 'estimatedTime': {'default': '2 weeks', 'title': 'Estimatedtime', 'type': 'string'}, 'createdByUser': {'$ref': '#/$defs/UserSchema'}}, 'required': ['previewFile', 'createdByUser'], 'title': 'CourseSchema', 'type': 'object'}, 'FileSchema': {'description': 'Описание структуры файла.', 'properties': {'id': {'title': 'Id', 'type': 'string'}, 'url': {'format': 'uri', 'maxLength': 2083, 'minLength': 1, 'title': 'Url', 'type': 'string'}, 'filename': {'title': 'Filename', 'type': 'string'}, 'directory': {'title': 'Directory', 'type': 'string'}}, 'required': ['id', 'url', 'filename', 'directory'], 'title': 'FileSchema', 'type': 'object'}, 'UserSchema': {'description': 'Описание структуры пользователя.', 'properties': {'id': {'title': 'Id', 'type': 'string'}, 'email': {'format': 'email', 'title': 'Email', 'type': 'string'}, 'lastName': {'title': 'Lastname', 'type': 'string'}, 'firstName': {'title': 'Firstname', 'type': 'string'}, 'middleName': {'title': 'Middlename', 'type': 'string'}}, 'required': ['id', 'email', 'lastName', 'firstName', 'middleName'], 'title': 'UserSchema', 'type': 'object'}}, 'description': 'Описание структуры ответа на получение списка курсов.', 'properties': {'courses': {'items': {'$ref': '#/$defs/CourseSchema'}, 'title': 'Courses', 'type': 'array'}}, 'required': ['courses'], 'title': 'GetCoursesResponseSchema', 'type': 'object'}"}], "start": 1752506420150, "stop": 1752506420150}], "attachments": [{"name": "log", "source": "eb6e3704-febd-4f5d-95f8-2f913ee54e80-attachment.txt", "type": "text/plain"}], "start": 1752506420136, "stop": 1752506420150, "uuid": "4c9c7b9e-f72a-4f2c-8c85-900d85ea3f5e", "historyId": "c220a168b54939ebe95e6c24a0306519", "testCaseId": "c220a168b54939ebe95e6c24a0306519", "fullName": "tests.courses.test_courses.TestCourses#test_get_courses", "labels": [{"name": "feature", "value": "Courses"}, {"name": "tag", "value": "REGRESSION"}, {"name": "tag", "value": "COURSES"}, {"name": "tag", "value": "GET_ENTITIES"}, {"name": "parentSuite", "value": "LMS service"}, {"name": "epic", "value": "LMS service"}, {"name": "suite", "value": "Courses"}, {"name": "subSuite", "value": "Get entities"}, {"name": "story", "value": "Get entities"}, {"name": "tag", "value": "regression"}, {"name": "tag", "value": "courses"}, {"name": "host", "value": "MacBook-Pro-Tochka-2.local"}, {"name": "thread", "value": "20295-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.courses.test_courses"}]}